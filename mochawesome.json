{
  "stats": {
    "suites": 3,
    "tests": 7,
    "passes": 7,
    "pending": 0,
    "failures": 0,
    "start": "2025-12-23T09:53:13.983Z",
    "end": "2025-12-23T09:57:39.651Z",
    "duration": 265668,
    "testsRegistered": 7,
    "passPercent": 100,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "44719722-4fab-488f-8418-15bca5b0d5fe",
      "title": "",
      "fullFile": "/home/runner/work/sdk/sdk/packages/core-sdk/test/integration/ipAsset.test.ts",
      "file": "/test/integration/ipAsset.test.ts",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "80d14783-b1cb-41a2-af48-2c7dcb72d7eb",
          "title": "IP Asset Functions",
          "fullFile": "/home/runner/work/sdk/sdk/packages/core-sdk/test/integration/ipAsset.test.ts",
          "file": "/test/integration/ipAsset.test.ts",
          "beforeHooks": [
            {
              "title": "\"before all\" hook in \"IP Asset Functions\"",
              "fullTitle": "IP Asset Functions \"before all\" hook in \"IP Asset Functions\"",
              "timedOut": false,
              "duration": 126,
              "state": null,
              "speed": null,
              "pass": false,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "client = (0, util_1.getStoryClient)();\nconst res = await client.license.registerPILTerms(src_1.PILFlavor.nonCommercialSocialRemixing());\nnoCommercialLicenseTermsId = res.licenseTermsId;",
              "err": {},
              "uuid": "9fc85f3a-c202-4661-9d25-4c14c453498c",
              "parentUUID": "80d14783-b1cb-41a2-af48-2c7dcb72d7eb",
              "isHook": true,
              "skipped": false
            }
          ],
          "afterHooks": [],
          "tests": [],
          "suites": [
            {
              "uuid": "6afa8dc5-e708-41e5-a834-3023b6665562",
              "title": "Link Derivative",
              "fullFile": "/home/runner/work/sdk/sdk/packages/core-sdk/test/integration/ipAsset.test.ts",
              "file": "/test/integration/ipAsset.test.ts",
              "beforeHooks": [],
              "afterHooks": [],
              "tests": [
                {
                  "title": "should successfully when give childIpId and licenseTokenIds",
                  "fullTitle": "IP Asset Functions Link Derivative should successfully when give childIpId and licenseTokenIds",
                  "timedOut": false,
                  "duration": 34891,
                  "state": "passed",
                  "speed": "slow",
                  "pass": true,
                  "fail": false,
                  "pending": false,
                  "context": null,
                  "code": "// register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\nconst { parentIpId, licenseTermsId } = await createParentIpAndLicenseTerms();\nconst mintLicenseTokensResult = await client.license.mintLicenseTokens({\n    licenseTermsId: licenseTermsId,\n    licensorIpId: parentIpId,\n    maxMintingFee: 0,\n    maxRevenueShare: 100,\n});\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    licenseTokenIds: [mintLicenseTokensResult.licenseTokenIds[0]],\n    maxRts: 5 * 10 ** 6,\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");",
                  "err": {},
                  "uuid": "153ecbce-b67f-42e3-a987-c9a786ff0cb0",
                  "parentUUID": "6afa8dc5-e708-41e5-a834-3023b6665562",
                  "isHook": false,
                  "skipped": false
                }
              ],
              "suites": [
                {
                  "uuid": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                  "title": "parentIpId and licenseTermsId",
                  "fullFile": "/home/runner/work/sdk/sdk/packages/core-sdk/test/integration/ipAsset.test.ts",
                  "file": "/test/integration/ipAsset.test.ts",
                  "beforeHooks": [],
                  "afterHooks": [],
                  "tests": [
                    {
                      "title": "should successfully give ERC20 token",
                      "fullTitle": "IP Asset Functions Link Derivative parentIpId and licenseTermsId should successfully give ERC20 token",
                      "timedOut": false,
                      "duration": 26738,
                      "state": "passed",
                      "speed": "slow",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "// 1. register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\n// 2. create parent ip and license terms for ERC20\nconst parentIpIdAndLicenseTermsIdForERC20 = await createParentIpAndLicenseTerms(generated_1.erc20Address[util_1.aeneid]);\n// 3. link derivative\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    parentIpIds: [parentIpIdAndLicenseTermsIdForERC20.parentIpId],\n    licenseTermsIds: [parentIpIdAndLicenseTermsIdForERC20.licenseTermsId],\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");",
                      "err": {},
                      "uuid": "01450e48-cb2d-488e-86d8-807ac8ee0a7d",
                      "parentUUID": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should successfully give sufficient WIP token",
                      "fullTitle": "IP Asset Functions Link Derivative parentIpId and licenseTermsId should successfully give sufficient WIP token",
                      "timedOut": false,
                      "duration": 35276,
                      "state": "passed",
                      "speed": "slow",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "// 1. deposit 100 WIP token\nawait client.wipClient.deposit({\n    amount: 100n,\n});\n// 2. register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\n// 3. create parent ip and license terms for WIP\nconst parentIpIdAndLicenseTermsIdForWIP = await createParentIpAndLicenseTerms();\n// 4. link derivative\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    parentIpIds: [parentIpIdAndLicenseTermsIdForWIP.parentIpId],\n    licenseTermsIds: [parentIpIdAndLicenseTermsIdForWIP.licenseTermsId],\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");\n// 5. withdraw all WIP token\nconst wipBalance = await client.wipClient.balanceOf(util_1.TEST_WALLET_ADDRESS);\nawait client.wipClient.withdraw({\n    amount: wipBalance,\n});",
                      "err": {},
                      "uuid": "b6593fbf-6112-4b64-90de-0c31519a9cf2",
                      "parentUUID": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should successfully give insufficient WIP token",
                      "fullTitle": "IP Asset Functions Link Derivative parentIpId and licenseTermsId should successfully give insufficient WIP token",
                      "timedOut": false,
                      "duration": 22488,
                      "state": "passed",
                      "speed": "slow",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "// 1. register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\n// 2. create parent ip and license terms for WIP\nconst parentIpIdAndLicenseTermsIdForWIP = await createParentIpAndLicenseTerms();\n// 3. link derivative\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    parentIpIds: [parentIpIdAndLicenseTermsIdForWIP.parentIpId],\n    licenseTermsIds: [parentIpIdAndLicenseTermsIdForWIP.licenseTermsId],\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");",
                      "err": {},
                      "uuid": "5162973a-cab1-4799-b734-6fca0f80dae0",
                      "parentUUID": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should successfully give wip token with insufficient balance and sufficient erc20 token",
                      "fullTitle": "IP Asset Functions Link Derivative parentIpId and licenseTermsId should successfully give wip token with insufficient balance and sufficient erc20 token",
                      "timedOut": false,
                      "duration": 39976,
                      "state": "passed",
                      "speed": "slow",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "//1. register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\n// 2. create parent ip and license terms for WIP\nconst parentIpIdAndLicenseTermsIdForWIP1 = await createParentIpAndLicenseTerms();\nconst parentIpIdAndLicenseTermsIdForERC20 = await createParentIpAndLicenseTerms(generated_1.erc20Address[util_1.aeneid]);\n// 3. link derivative\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    parentIpIds: [\n        parentIpIdAndLicenseTermsIdForWIP1.parentIpId,\n        parentIpIdAndLicenseTermsIdForERC20.parentIpId,\n    ],\n    licenseTermsIds: [\n        parentIpIdAndLicenseTermsIdForWIP1.licenseTermsId,\n        parentIpIdAndLicenseTermsIdForERC20.licenseTermsId,\n    ],\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");",
                      "err": {},
                      "uuid": "bad8ef7f-8555-41bb-94b7-d8eee4b62692",
                      "parentUUID": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should successfully give wip token with sufficient balance and sufficient erc20 token",
                      "fullTitle": "IP Asset Functions Link Derivative parentIpId and licenseTermsId should successfully give wip token with sufficient balance and sufficient erc20 token",
                      "timedOut": false,
                      "duration": 52842,
                      "state": "passed",
                      "speed": "slow",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "// 1. deposit 100 WIP token\nawait client.wipClient.deposit({\n    amount: 100n,\n});\n// 2. register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\n// 3. create parent ip and license terms for WIP\nconst parentIpIdAndLicenseTermsIdForWIP1 = await createParentIpAndLicenseTerms();\n// 4. create parent ip and license terms for ERC20\nconst parentIpIdAndLicenseTermsIdForERC20 = await createParentIpAndLicenseTerms(generated_1.erc20Address[util_1.aeneid]);\n// 5. link derivative\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    parentIpIds: [\n        parentIpIdAndLicenseTermsIdForWIP1.parentIpId,\n        parentIpIdAndLicenseTermsIdForERC20.parentIpId,\n    ],\n    licenseTermsIds: [\n        parentIpIdAndLicenseTermsIdForWIP1.licenseTermsId,\n        parentIpIdAndLicenseTermsIdForERC20.licenseTermsId,\n    ],\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");\n// 6. withdraw all WIP token\nconst wipBalance = await client.wipClient.balanceOf(util_1.TEST_WALLET_ADDRESS);\nawait client.wipClient.withdraw({\n    amount: wipBalance,\n});",
                      "err": {},
                      "uuid": "51d7040f-72f2-4e6e-9de1-4e053df3a8bb",
                      "parentUUID": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                      "isHook": false,
                      "skipped": false
                    },
                    {
                      "title": "should successfully give wip token with insufficient balance and sufficient erc20 token and useMulticallWhenPossible is false",
                      "fullTitle": "IP Asset Functions Link Derivative parentIpId and licenseTermsId should successfully give wip token with insufficient balance and sufficient erc20 token and useMulticallWhenPossible is false",
                      "timedOut": false,
                      "duration": 53326,
                      "state": "passed",
                      "speed": "slow",
                      "pass": true,
                      "fail": false,
                      "pending": false,
                      "context": null,
                      "code": "// 1. register a child ip\nconst tokenId = await (0, util_1.getTokenId)();\nconst childIpId = (await client.ipAsset.register({\n    nftContract: util_1.mockERC721,\n    tokenId: tokenId,\n})).ipId;\n// 2. create parent ip and license terms for WIP\nconst parentIpIdAndLicenseTermsIdForWIP1 = await createParentIpAndLicenseTerms();\n// 3. create parent ip and license terms for ERC20\nconst parentIpIdAndLicenseTermsIdForERC20 = await createParentIpAndLicenseTerms(generated_1.erc20Address[util_1.aeneid]);\n// 4. link derivative\nconst result = await client.ipAsset.linkDerivative({\n    childIpId: childIpId,\n    parentIpIds: [\n        parentIpIdAndLicenseTermsIdForWIP1.parentIpId,\n        parentIpIdAndLicenseTermsIdForERC20.parentIpId,\n    ],\n    licenseTermsIds: [\n        parentIpIdAndLicenseTermsIdForWIP1.licenseTermsId,\n        parentIpIdAndLicenseTermsIdForERC20.licenseTermsId,\n    ],\n    options: {\n        wipOptions: {\n            useMulticallWhenPossible: false,\n        },\n    },\n});\n(0, chai_1.expect)(result.txHash).to.be.a(\"string\");",
                      "err": {},
                      "uuid": "0f519747-d94a-4064-90cc-3fcbfdc6a11f",
                      "parentUUID": "01f93466-88eb-4130-b06f-7d12d820a1e3",
                      "isHook": false,
                      "skipped": false
                    }
                  ],
                  "suites": [],
                  "passes": [
                    "01450e48-cb2d-488e-86d8-807ac8ee0a7d",
                    "b6593fbf-6112-4b64-90de-0c31519a9cf2",
                    "5162973a-cab1-4799-b734-6fca0f80dae0",
                    "bad8ef7f-8555-41bb-94b7-d8eee4b62692",
                    "51d7040f-72f2-4e6e-9de1-4e053df3a8bb",
                    "0f519747-d94a-4064-90cc-3fcbfdc6a11f"
                  ],
                  "failures": [],
                  "pending": [],
                  "skipped": [],
                  "duration": 230646,
                  "root": false,
                  "rootEmpty": false,
                  "_timeout": 300000
                }
              ],
              "passes": [
                "153ecbce-b67f-42e3-a987-c9a786ff0cb0"
              ],
              "failures": [],
              "pending": [],
              "skipped": [],
              "duration": 34891,
              "root": false,
              "rootEmpty": false,
              "_timeout": 300000
            }
          ],
          "passes": [],
          "failures": [],
          "pending": [],
          "skipped": [],
          "duration": 0,
          "root": false,
          "rootEmpty": false,
          "_timeout": 300000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 300000
    }
  ],
  "meta": {
    "mocha": {
      "version": "10.8.2"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": null,
      "version": "6.3.2"
    }
  }
}